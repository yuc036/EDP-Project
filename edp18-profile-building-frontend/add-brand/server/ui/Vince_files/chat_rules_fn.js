function setProductID(r){try{void 0===_vsq._dataFields["incidents.prod"]&&(_vsq._dataFields["incidents.prod"]="655"),void 0===r?r=Number(_vsq._dataFields["incidents.prod"]):_vsq._dataFields["incidents.prod"]=r.toString()}catch(r){}if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0){var e={ID:0,chats:!(rnChat.vars.opsToggles.prodArray=[]),hours:!1,queuing:!1};rnChat.vars.opsToggles.prodArray.push(e)}if(index=rnChat.vars.opsToggles.prodArray.map(function(r){return r.ID}).indexOf(parseInt(r)),"undefined"==typeof rn_calledArray||null===rn_calledArray){e={ID:parseInt(r),chats:!1,hours:!1,queuing:!1};rnChat.vars.opsToggles.prodArray.push(e),rn_calledArray=[],rn_calledArray.push(r),(n=document.createElement("script")).id="chat-jsonp-script-tag",n.src=rightNowDomainName+"/cgi-bin/macys.cfg/php/custom/chattest.php?ruleProductID="+r+"&callback=processJson",n.async=!1,n.type="text/javascript",document.body.appendChild(n),rnChat.vars.opsToggles.calledChatTest=1}else{var t=0;for(i=0;i<rn_calledArray.length;i++)rn_calledArray[i]===r&&(t=2);if(0===t){var n;e={ID:parseInt(r),chats:!1,hours:!1,queuing:!1};rnChat.vars.opsToggles.prodArray.push(e),rn_calledArray.push(r),(n=document.createElement("script")).id="chat-jsonp-script-tag",n.src=rightNowDomainName+"/cgi-bin/macys.cfg/php/custom/chattest.php?ruleProductID="+r+"&callback=processJson",n.async=!1,n.type="text/javascript",document.body.appendChild(n),rnChat.vars.opsToggles.calledChatTest=1}}return rnChat.vars.opsToggles.pageProductID=r,!0}function preload(){return!0}function processJson(r){if("object"!=typeof rnChat.vars.opsToggles.prodArray)return!1;index=rnChat.vars.opsToggles.prodArray.map(function(r){return r.ID}).indexOf(parseInt(r.key5)),index<0||rnChat.vars.opsToggles.prodArray.splice(index,1);var e={ID:parseInt(r.key5),chats:r.key2,hours:r.key4,queuing:r.key3};rnChat.vars.opsToggles.prodArray.push(e),rnChat.vars.opsToggles.PassProductID=r.key5,rnChat.vars.opsToggles.displaychat=r.key1,rnChat.vars.opsToggles.allchatnotoff=r.key2,rnChat.vars.opsToggles.allowqueuing=r.key3,rnChat.vars.opsToggles.withinChatHours=r.key4}function allChatOffersOff(r){try{void 0===r&&(r=Number(_vsq._dataFields["incidents.prod"]))}catch(r){}if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0)return!1;var e;if("undefined"!==r){for(i=0;i<rnChat.vars.opsToggles.prodArray.length;i++){rnChat.vars.opsToggles.prodArray[i].ID==r&&(e=rnChat.vars.opsToggles.prodArray[i],i=rnChat.vars.opsToggles.prodArray.length+1)}return!(!rnChat.vars.opsToggles.prodArray||!e||!0!==e.chats)}return!1}function allowQueuing(r){try{void 0===r&&(r=Number(_vsq._dataFields["incidents.prod"]))}catch(r){}if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0)return!1;var e;if("undefined"!==r){for(i=0;i<rnChat.vars.opsToggles.prodArray.length;i++){rnChat.vars.opsToggles.prodArray[i].ID==r&&(e=rnChat.vars.opsToggles.prodArray[i],i=rnChat.vars.opsToggles.prodArray.length+1)}return!(!rnChat.vars.opsToggles.prodArray||!e||!0!==e.queuing)}return!1}function NoQueuing(r){try{void 0===r&&(r=Number(_vsq._dataFields["incidents.prod"]))}catch(r){}if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0)return!1;var e;if("undefined"!=r){for(i=0;i<rnChat.vars.opsToggles.prodArray.length;i++){rnChat.vars.opsToggles.prodArray[i].ID==r&&(e=rnChat.vars.opsToggles.prodArray[i],i=rnChat.vars.opsToggles.prodArray.length+1)}return!(!rnChat.vars.opsToggles.prodArray||!e||!1!==e.queuing)}return!1}function withinChatHours(r){try{void 0===r&&(r=Number(_vsq._dataFields["incidents.prod"]))}catch(r){}if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0)return!1;var e;if("undefined"!=r){for(i=0;i<rnChat.vars.opsToggles.prodArray.length;i++){rnChat.vars.opsToggles.prodArray[i].ID==r&&(e=rnChat.vars.opsToggles.prodArray[i],i=rnChat.vars.opsToggles.prodArray.length+1)}return!(!rnChat.vars.opsToggles.prodArray||!e||!0!==e.hours)}return!1}function outsideChatHours(r){if("object"!=typeof rnChat.vars.opsToggles.prodArray||rnChat.vars.opsToggles.prodArray.length<=0)return!1;var e;if("undefined"!=r){for(i=0;i<rnChat.vars.opsToggles.prodArray.length;i++){rnChat.vars.opsToggles.prodArray[i].ID==r&&(e=rnChat.vars.opsToggles.prodArray[i],i=rnChat.vars.opsToggles.prodArray.length+1)}return!(!rnChat.vars.opsToggles.prodArray||!e||!1!==e.hours)}return!1}function elementExists(r){return!!document.getElementById(r)}function rnRCadd(r,e,t,n){if(0<$("#"+r).length||"new"==r){if(0==$("#rnowChatLinkContainer_"+e).length){var a='<div id="rnowChatLinkContainer_'+e+'"><div id="rnowChatLink_'+e+'" ><div id="rnowChatLinkInfo_'+e+'"/></div></div>';switch(n){case"append":0==$("#rnowChatLinkContainer_"+e).length?0!==$("#qnasSummary").length?$(a).insertBefore("#qnasSummary"):0!==$("#pdpreviews").length&&$("#pdpreviews").prepend(a):$("#"+r).append(a);break;case"after":$(a).insertAfter("#"+r);break;case"before":$(a).insertBefore("#"+r);break;default:$("#"+r).prepend(a)}}return"string"==typeof t&&$("#rnowChatLinkContainer_"+e).addClass("rnowRAChat_"+t),!0}return!1}function rnRCinsertId(r,e){return $(r).attr("id",e),!0}function minSalePrice(r){try{return Number(rnChat.vars.price)>=r}catch(r){return console.log("-- salePrice variable does NOT exist ---"),!1}}function rnGetGender(){try{null!==document.title.match(/Homme|Him|Men|Cologne|Colonia/g)&&document.getElementById("rn_Dialog_0").parentNode.parentNode.setAttribute("gender","men"),null!==document.title.match(/Femme|Her|Women|Parfum|Perfume|Profumo/g)&&document.getElementById("rn_Dialog_0").parentNode.parentNode.setAttribute("gender","women")}catch(r){}}function checkSPA(){void 0!==rnChat.vars.currentPageURL&&rnChat.vars.currentPageURL!==location.href?(rnChat.vars.currentPageURL=location.href,console.log("-- ee Rules Reset for SPA --"),ATGSvcs.ee.reset()):rnChat.vars.currentPageURL=location.href}function syncCPCookie(){rnChat.syncCPCookie()}function rnChatFunc(r,e){rnChat[r](e)}function rnChatSuppress(r){document.cookie="noChat=RNTLIVE; expires="+new Date(Date.now()+6e4*r).toUTCString()+";path=/"}rnChat.vars.opsToggles=new Object,rnChat.syncCPCookie=function(){var r=document.createElement("script");r.id="chat-jsonp-script-tag",r.src=rightNowDomainName+"/cgi-bin/macys.cfg/php/custom/headercookie.php?SignedIn="+rnChat.getCookie("SignedIn")+"&macys_online_guid="+rnChat.getCookie("macys_online_guid")+"&macys_online_uid="+rnChat.getCookie("macys_online_uid")+"&GCs="+rnChat.getCookie("GCs")+"&callback=processJson",r.async=!1,r.type="text/javascript",document.body.appendChild(r)},location.href.match(/(customerservice-(macys|bloomingdales)|\.custhelp)\.com/)&&null!==document.getElementById("rn_ChatLink_Sessions")&&null!==document.getElementById("rn_ChatLink_Queuing")&&(setProductID(655),rnChat.checkCPChatToggle=function(r){setProductID(r),withinChatHours(r)&&allChatOffersOff(r)?(document.getElementById("rn_ChatLink_Sessions").removeAttribute("style"),document.getElementById("rn_ChatLink_Queuing").removeAttribute("style"),allowQueuing(r)?(document.getElementById("rn_ChatLink_Sessions").style.display="none",document.getElementById("rn_ChatLink_Queuing").style.display=""):(document.getElementById("rn_ChatLink_Queuing").style.display="none",document.getElementById("rn_ChatLink_Sessions").style.display="")):(document.getElementById("rn_ChatLink_Sessions").style.display="none",document.getElementById("rn_ChatLink_Queuing").style.display="none")},setProductID(655),rnChat.timers.checkCPChatToggle_t=setTimeout(function(){rnChat.checkCPChatToggle(655)},1200),rnChat.timers.checkCPChatToggle_i=setInterval(function(){rnChat.checkCPChatToggle(655)},6e4),rnChat.timers.checkCPChatToggle_x=setTimeout(function(){clearInterval(rnChat.timers.checkCPChatToggle_i)},6e5));