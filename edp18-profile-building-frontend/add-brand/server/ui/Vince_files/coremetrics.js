var trackRuleOfferred,trackRuleOfferredCount=0;!function(){var t=document.title;"string"==typeof coremetrics.cmLastReferencedPageID&&0<coremetrics.cmLastReferencedPageID.length&&(t=coremetrics.cmLastReferencedPageID);var n=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),console.log("Analytics Tracking - Rule Run: "+a+" RULERUN - pageID="+t),cmCreateElementTag("Triggered",a,t)}},r=function(e){if(e.rule){trackRuleOfferred=!0,trackRuleOfferredCount++;var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),-1<a.indexOf("Reactive")||(console.log("Analytics Tracking - Invite Offered: "+a+" OFFER - pageID="+t),cmCreateElementTag("RuleTriggered",a,t),cmCreateElementTag("Offered",a+" OFFER",t))}},c=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),-1<a.indexOf("Reactive")?(d=new Date,utc=d.getTime()+6e4*d.getTimezoneOffset(),nd=new Date(utc+-144e5),EST_date=nd.toLocaleString(),console.log("Analytics Tracking - Reactive Invite Accepted: "+e.rule.name+" ACCEPT - pageID="+t+" date="+EST_date),cmCreateElementTag("reactive_chat_requested","reactive_chat",t+"-_--_--_--_--_--_--_--_--_--_--_--_--_--_-"+EST_date)):(console.log("Analytics Tracking - Invite Accepted: "+a+" ACCEPT - pageID="+t),cmCreateElementTag("Accepted",a+" ACCEPT",t))}},i=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),console.log("Analytics Tracking - Invite Declined: "+a+" DECLINE - pageID="+t),cmCreateElementTag("Declined",a+" DECLINE",t)}},l=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),console.log("Analytics Tracking - Invite Closed: "+a+" DECLINE - pageID="+t),cmCreateElementTag("Declined",a+" DECLINE",t)}},s=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),console.log("Analytics Tracking - Invite Hidden: "+a+" RuleTriggered - pageID="+t),cmCreateElementTag("RuleTriggered",a,t)}},g=function(e){if(e.rule){var a=e.rule.name.replace(/ - [A-Z][0-9]{0,1}/,"");"string"==typeof _vsq._dataFields[93]&&(a=_vsq._dataFields[93]),console.log("Analytics Tracking - Invite Suppressed: "+a+" RuleTriggered - pageID="+t),cmCreateElementTag("RuleTriggered",a,t)}};ATGSvcs.eventSubscribe({eeRuleRan:function(e,a){n(a)},eeOffered:function(e,a){r(a)},eeAccepted:function(e,a){c(a)},eeDeclined:function(e,a){i(a)},eeClosed:function(e,a){l(a)},eeHidden:function(e,a){s(a)},eeSuppressed:function(e,a){g(a)}})}();